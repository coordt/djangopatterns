{"body": "<div class=\"section\" id=\"abstract-model-mixins\">\n<h1>Abstract Model Mixins<a class=\"headerlink\" href=\"#abstract-model-mixins\" title=\"Permalink to this headline\">\u00b6</a></h1>\n<div class=\"admonition warning\">\n<p class=\"first admonition-title\">Warning</p>\n<p class=\"last\" id=\"1\">This is just a stub document. It will be fleshed out more. If you wish to comment on it, please e-mail coreyoordt at gmail.</p>\n</div>\n<div class=\"section\" id=\"what-problem-does-this-pattern-solve\">\n<h2>What problem does this pattern solve?<a class=\"headerlink\" href=\"#what-problem-does-this-pattern-solve\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p id=\"2\">It creates a tool kit to build complex models.</p>\n</div>\n<div class=\"section\" id=\"when-to-use-it\">\n<h2>When to use it<a class=\"headerlink\" href=\"#when-to-use-it\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p id=\"3\">For models that you will commonly build in projects but have many different potential features, and you want your models to only contain the features necessary. Blogs are a good example, where where are many potential options to include within a blog, but you don&#8217;t need all of them all the time.</p>\n</div>\n<div class=\"section\" id=\"why-should-i-use-it\">\n<h2>Why should I use it?<a class=\"headerlink\" href=\"#why-should-i-use-it\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p id=\"4\">This allows developers to fix bugs once, in the tool kit. Installing the new tool kit version will fix those bugs in each model created from it.</p>\n</div>\n<div class=\"section\" id=\"where-is-it-used\">\n<h2>Where is it used?<a class=\"headerlink\" href=\"#where-is-it-used\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p id=\"5\">I first saw this in <a class=\"reference external\" href=\"http://www.glamkit.com/\">GLAMkit</a>&#8216;s <a class=\"reference external\" href=\"https://github.com/glamkit/glamkit-blogtools\">blogtools</a> package. It is also used in Django 1.3&#8217;s <a class=\"reference external\" href=\"https://docs.djangoproject.com/en/1.3/topics/class-based-views/\">class-based views</a>.</p>\n</div>\n<div class=\"section\" id=\"implementation\">\n<h2>Implementation<a class=\"headerlink\" href=\"#implementation\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<div class=\"section\" id=\"models\">\n<h3>Models<a class=\"headerlink\" href=\"#models\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p id=\"6\">First isolate all the potential or optional features from core features. The core features and each isolated set of optional features will make up individual abstract Django models.</p>\n<p id=\"7\">GLAMkit isolated the one base model (<tt class=\"docutils literal\"><span class=\"pre\">EntryBase</span></tt>), and four optional features: add a <em>featured</em> flag, add a <em>status</em> field, add a tag field, and allow for the body and excerpt content to convert to HTML.</p>\n<p id=\"8\"><tt class=\"docutils literal\"><span class=\"pre\">EntryBase</span></tt> includes seven fields&#8211;author, title, pub_date, slug, enable_comments, excerpt, and body&#8211;as well as <tt class=\"docutils literal\"><span class=\"pre\">__unicode__()</span></tt>, <tt class=\"docutils literal\"><span class=\"pre\">get_absolute_url()</span></tt> and <tt class=\"docutils literal\"><span class=\"pre\">excerpt_or_body()</span></tt> functions. The <tt class=\"docutils literal\"><span class=\"pre\">Meta</span></tt> class has <tt class=\"docutils literal\"><span class=\"pre\">abstract=True</span></tt> so that Django never tries to represent this model in a database. It must be subclassed.</p>\n<p id=\"9\"><tt class=\"docutils literal\"><span class=\"pre\">FeaturableEntryMixin</span></tt> is an abstract class that merely defines an <tt class=\"docutils literal\"><span class=\"pre\">is_featured</span></tt> field.</p>\n<p id=\"10\"><tt class=\"docutils literal\"><span class=\"pre\">StatusableEntryMixin</span></tt> is an abstract class that defines <tt class=\"docutils literal\"><span class=\"pre\">LIVE_STATUS</span></tt>, <tt class=\"docutils literal\"><span class=\"pre\">DRAFT_STATUS</span></tt>, and <tt class=\"docutils literal\"><span class=\"pre\">HIDDEN_STATUS</span></tt> values and choices. It defines a <tt class=\"docutils literal\"><span class=\"pre\">status</span></tt> field with those choices.</p>\n<p id=\"11\"><tt class=\"docutils literal\"><span class=\"pre\">TaggableEntryMixin</span></tt> is an abstract class that is only available if Django-Tagging is installed, as it uses the <tt class=\"docutils literal\"><span class=\"pre\">TagField</span></tt> for the <tt class=\"docutils literal\"><span class=\"pre\">tags</span></tt> field it defines.</p>\n<p id=\"12\"><tt class=\"docutils literal\"><span class=\"pre\">HTMLFormattableEntryMixin</span></tt> is a much more complex abstract class. It is only available if the <tt class=\"docutils literal\"><span class=\"pre\">template_utils</span></tt> package is available. It defines two text fields, <tt class=\"docutils literal\"><span class=\"pre\">excerpt_html</span></tt> and <tt class=\"docutils literal\"><span class=\"pre\">body_html</span></tt>. It also overrides the <tt class=\"docutils literal\"><span class=\"pre\">save()</span></tt> method so it can convert the contents of <tt class=\"docutils literal\"><span class=\"pre\">exceprt</span></tt> and <tt class=\"docutils literal\"><span class=\"pre\">body</span></tt> into HTML for <tt class=\"docutils literal\"><span class=\"pre\">excerpt_html</span></tt> and <tt class=\"docutils literal\"><span class=\"pre\">body_html</span></tt>, respectively. Finally it re-defines the <tt class=\"docutils literal\"><span class=\"pre\">excerpt_or_body()</span></tt> method to return the <tt class=\"docutils literal\"><span class=\"pre\">excerpt_html</span></tt> or <tt class=\"docutils literal\"><span class=\"pre\">body_html</span></tt> value.</p>\n</div>\n<div class=\"section\" id=\"admin\">\n<h3>Admin<a class=\"headerlink\" href=\"#admin\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p id=\"13\">It is difficult to provide a really good <tt class=\"docutils literal\"><span class=\"pre\">ModelAdmin</span></tt> class when you aren&#8217;t sure what fields or features are included in the final model. GLAMkit provides a <tt class=\"docutils literal\"><span class=\"pre\">EntryAdminBase</span></tt> which is subclassed from <tt class=\"docutils literal\"><span class=\"pre\">object</span></tt> (not <tt class=\"docutils literal\"><span class=\"pre\">ModelAdmin</span></tt>). Providing other admin mixins would make sense if there were admin-specific features to provide, such as adding a WYSIWYG editor, autocomplete lookups or special filtering.</p>\n</div>\n<div class=\"section\" id=\"urls\">\n<h3>URLs<a class=\"headerlink\" href=\"#urls\" title=\"Permalink to this headline\">\u00b6</a></h3>\n</div>\n<div class=\"section\" id=\"views\">\n<h3>Views<a class=\"headerlink\" href=\"#views\" title=\"Permalink to this headline\">\u00b6</a></h3>\n</div>\n<div class=\"section\" id=\"syndication-feeds\">\n<h3>Syndication Feeds<a class=\"headerlink\" href=\"#syndication-feeds\" title=\"Permalink to this headline\">\u00b6</a></h3>\n</div>\n</div>\n<div class=\"section\" id=\"how-to-use-it\">\n<h2>How to use it<a class=\"headerlink\" href=\"#how-to-use-it\" title=\"Permalink to this headline\">\u00b6</a></h2>\n</div>\n<div class=\"section\" id=\"sources\">\n<h2>Sources<a class=\"headerlink\" href=\"#sources\" title=\"Permalink to this headline\">\u00b6</a></h2>\n</div>\n<div class=\"section\" id=\"useful-links\">\n<h2>Useful Links<a class=\"headerlink\" href=\"#useful-links\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p id=\"14\">GLAMKit (Gallery, Library, Archive, Museum) an Australian group, tackles this situation with a set of abstract classes that provide very basic features.</p>\n<p id=\"15\">You create your model by subclassing the classes that provide the functionality you need.</p>\n<p id=\"16\">And you don\u2019t have to stop there. You can add your own fields as well.</p>\n<div class=\"highlight-python\"><div class=\"highlight\"><pre><span class=\"k\">class</span> <span class=\"nc\">PRBlog</span><span class=\"p\">(</span><span class=\"n\">EntryBase</span><span class=\"p\">,</span>\n             <span class=\"n\">StatusableEntryMixin</span><span class=\"p\">):</span>\n\n    <span class=\"n\">subhead</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">CharField</span><span class=\"p\">()</span>\n    <span class=\"n\">pdf</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">FileField</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n</div>\n</div>\n", "display_toc": true, "title": "Abstract Model Mixins", "sourcename": "models/abstract_model_mixins.txt", "customsidebar": null, "current_page_name": "models/abstract_model_mixins", "next": {"link": "../common_options/", "title": "Configurable Options for Common Situations"}, "rellinks": [["genindex", "General Index", "I", "index"], ["models/common_options", "Configurable Options for Common Situations", "N", "next"], ["models/index", "Model Patterns", "P", "previous"]], "meta": {}, "parents": [{"link": "../", "title": "Model Patterns"}], "sidebars": null, "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">Abstract Model Mixins</a><ul>\n<li><a class=\"reference internal\" href=\"#what-problem-does-this-pattern-solve\">What problem does this pattern solve?</a></li>\n<li><a class=\"reference internal\" href=\"#when-to-use-it\">When to use it</a></li>\n<li><a class=\"reference internal\" href=\"#why-should-i-use-it\">Why should I use it?</a></li>\n<li><a class=\"reference internal\" href=\"#where-is-it-used\">Where is it used?</a></li>\n<li><a class=\"reference internal\" href=\"#implementation\">Implementation</a><ul>\n<li><a class=\"reference internal\" href=\"#models\">Models</a></li>\n<li><a class=\"reference internal\" href=\"#admin\">Admin</a></li>\n<li><a class=\"reference internal\" href=\"#urls\">URLs</a></li>\n<li><a class=\"reference internal\" href=\"#views\">Views</a></li>\n<li><a class=\"reference internal\" href=\"#syndication-feeds\">Syndication Feeds</a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#how-to-use-it\">How to use it</a></li>\n<li><a class=\"reference internal\" href=\"#sources\">Sources</a></li>\n<li><a class=\"reference internal\" href=\"#useful-links\">Useful Links</a></li>\n</ul>\n</li>\n</ul>\n", "prev": {"link": "../", "title": "Model Patterns"}, "metatags": ""}